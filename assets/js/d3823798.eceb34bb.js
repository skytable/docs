"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5436],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),f=o,m=d["".concat(s,".").concat(f)]||d[f]||u[f]||a;return n?r.createElement(m,i(i({ref:t},c),{},{components:n})):r.createElement(m,i({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},89150:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(87462),o=(n(67294),n(3905));const a={id:"ssl",title:"TLS configuration"},i=void 0,l={unversionedId:"ssl",id:"ssl",title:"TLS configuration",description:"Skytable lets you secure connections with TLS. This feature is built into Sky with OpenSSL and doesn't require you to have OpenSSL installed. You can enable TLS by using your preferred mode of configuration.",source:"@site/docs/11.ssl.md",sourceDirName:".",slug:"/ssl",permalink:"/next/ssl",draft:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{id:"ssl",title:"TLS configuration"},sidebar:"docs",previous:{title:"Snapshots",permalink:"/next/snapshots"},next:{title:"Client drivers",permalink:"/next/clients"}},s={},p=[{value:"Step 1: Create a self-signed certificate and private key",id:"step-1-create-a-self-signed-certificate-and-private-key",level:3},{value:"Step 2: Add it to your configuration and launch",id:"step-2-add-it-to-your-configuration-and-launch",level:3},{value:"With config files",id:"with-config-files",level:4},{value:"With command-line arguments",id:"with-command-line-arguments",level:4}],c={toc:p};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Skytable lets you secure connections with TLS. This feature is built into Sky with OpenSSL and doesn't require you to have OpenSSL installed. You can enable TLS by using your ",(0,o.kt)("a",{parentName:"p",href:"config"},"preferred mode of configuration"),"."),(0,o.kt)("h3",{id:"step-1-create-a-self-signed-certificate-and-private-key"},"Step 1: Create a self-signed certificate and private key"),(0,o.kt)("p",null,"This is outside the scope of this document, but you can read ",(0,o.kt)("a",{parentName:"p",href:"https://stackoverflow.com/a/10176685"},"this guide on Stackoverflow")," to get a brief idea of creating one."),(0,o.kt)("h3",{id:"step-2-add-it-to-your-configuration-and-launch"},"Step 2: Add it to your configuration and launch"),(0,o.kt)("h4",{id:"with-config-files"},"With config files"),(0,o.kt)("p",null,"Add the following block:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'[ssl]\nkey = "/path/to/keyfile.pem"\nchain = "/path/to/chain.pem"\nport = 2004\nonly = true\n')),(0,o.kt)("p",null,"The above block is self-explanatory; you just have to add the paths to the private key and certificate files and add the port (if required)."),(0,o.kt)("p",null,"By setting ",(0,o.kt)("inlineCode",{parentName:"p"},"only")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),", the server will only accept accept secure connections. In other cases,\nthe server listens to two ports: ",(0,o.kt)("inlineCode",{parentName:"p"},"2003")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"2004"),", a non-TLS port and a TLS port (similar to port\n80 and port 443 in HTTP/HTTPS). As expected, you can configure this port number to suit your needs."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"We use the terms ",(0,o.kt)("inlineCode",{parentName:"p"},"SSL")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"TLS")," interchangeably, when what we really mean is TLS.")),(0,o.kt)("h4",{id:"with-command-line-arguments"},"With command-line arguments"),(0,o.kt)("p",null,"Simply start ",(0,o.kt)("inlineCode",{parentName:"p"},"skyd")," with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"skyd -z cert.pem -k key.pem\n")),(0,o.kt)("admonition",{title:"Tip",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You can pass the ",(0,o.kt)("inlineCode",{parentName:"p"},"--sslonly")," flag to force the server to only accept secure connections, disabling the non-SSL interface. When this flag is not passed, and other SSL options are given ","\u2014"," the server listens to both SSL and non-SSL requests")),(0,o.kt)("admonition",{title:"Note",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"To use TLS with the Skytable shell (",(0,o.kt)("inlineCode",{parentName:"p"},"skysh"),") just run:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre"},"skysh -C /path/to/cert.pem --port [SSLPORT]\n")),(0,o.kt)("p",{parentName:"admonition"},"and you'll be on a secure connection. Don't forget the SSL port! The skytable daemon binds the secure\nlistener on a different port when in multi-socket mode.")))}u.isMDXComponent=!0}}]);