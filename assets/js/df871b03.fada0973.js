"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1208],{3257:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var n=t(5893),i=t(1151);const r={id:"configuration",title:"Configuration"},d=void 0,c={id:"system/configuration",title:"Configuration",description:"Skytable can be configured to run per your needs. You can use either of command-line arguments, environment variables or a",source:"@site/docs/system/1.configuration.md",sourceDirName:"system",slug:"/system/configuration",permalink:"/system/configuration",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"configuration",title:"Configuration"},sidebar:"docs",previous:{title:"System Management",permalink:"/category/system-management"},next:{title:"Administration",permalink:"/system/administration"}},o={},l=[{value:"Configuration file",id:"configuration-file",level:2},{value:"Command-line arguments",id:"command-line-arguments",level:2},{value:"Environment variables",id:"environment-variables",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"Skytable can be configured to run per your needs. You can use either of command-line arguments, environment variables or a\nconfiguration file. We don't have any specific recommendation for a mode of configuration but we generally consider using a\nconfiguration file to be the best practice since it is something that won't get lost (which in other cases can get lost due\nto lost shell history and such)."}),"\n",(0,n.jsx)(s.h2,{id:"configuration-file",children:"Configuration file"}),"\n",(0,n.jsx)(s.p,{children:"The configuration file is a simple YAML file. Use this as your configuration file template:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:"system:\n  mode: prod\n  rs_window: 300\n\nauth:\n  plugin: pwd\n  # replace with your root password of choice\n  root_pass: password\n\nendpoints:\n  secure:\n    host: 127.0.0.1\n    port: 2004\n    # replace `cert` with the path to your self-signed certificate\n    cert: cert.pem\n    # replace `private_key` with the path to your private key\n    private_key: private.key\n    # replace `passphrase.txt` with the path to your private key passphrase\n    pkey_passphrase: passphrase.txt\n  insecure:\n    host: 127.0.0.1\n    port: 2003\n"})}),"\n",(0,n.jsx)(s.admonition,{title:"Starting the server with a configuration file",type:"info",children:(0,n.jsxs)(s.p,{children:["To start the server with a configuration file, simply run ",(0,n.jsx)(s.code,{children:"skyd --config <path to config>.yaml"})]})}),"\n",(0,n.jsx)(s.p,{children:"Here's an explanation of all the keys:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"system"}),":","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"mode"}),": set to either ",(0,n.jsx)(s.code,{children:"dev"})," / ",(0,n.jsx)(s.code,{children:"prod"})," mode. ",(0,n.jsx)(s.code,{children:"prod"})," mode will generally make some things stricters (such as background services)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"rs_window"}),": ",(0,n.jsx)(s.strong,{children:"This is a very important setting!"})," It is set to ",(0,n.jsx)(s.code,{children:"300"}),' by default and is called the "reliability service window" which ensures that if any changes are observed in ',(0,n.jsx)(s.code,{children:"300"})," (or whatever value you set) seconds, then they reach the disk\nas soon as that time elapses. For example, in the default configuration the system checks for changes every 5 minutes and if there are any dataset changes, they are immediately synced"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"auth"}),":","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"plugin"}),": this is the authentication plugin. we currently only have ",(0,n.jsx)(s.code,{children:"pwd"})," that is a simple password based authentication system where the password is stored as an ",(0,n.jsxs)(s.a,{href:"https://github.com/ohsayan/rcrypt",children:[(0,n.jsx)(s.code,{children:"rcrypt"})," hash"]})," on disk. More ",(0,n.jsx)(s.code,{children:"plugin"})," options are set to be implemented for more advanced authentication, especially in enterprise settings"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"root_pass"}),": this is the root account password. ",(0,n.jsx)(s.strong,{children:"It must have atleast 16 characters"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"endpoints"}),":","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"secure"}),":","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"host"}),": the host for your secure (TLS) endpoint"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"port"}),": the port for your secure (TLS) endpoint"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"cert"}),": path to the PEM certificate to use for TLS"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"private_key"}),": path to the PEM private key to use for TLS"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"pkey_passphrase"}),": all private keys must be secured with a passphrase; this key should be set to ",(0,n.jsx)(s.strong,{children:"the path of a plaintext file containing your passphrase"})," and ",(0,n.jsx)(s.strong,{children:"not the passphrase itself"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"insecure"}),":","\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"host"}),": the host for your TCP endpoint"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"port"}),": the port for your TCP endpoint"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"command-line-arguments",children:"Command-line arguments"}),"\n",(0,n.jsx)(s.p,{children:"You can use the following command line arguments:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Category"}),(0,n.jsx)(s.th,{children:"Argument"}),(0,n.jsx)(s.th,{children:"Example"}),(0,n.jsx)(s.th,{children:"Meaning"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--config"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--config=config.yaml"})}),(0,n.jsx)(s.td,{children:"Path to the configuration file."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"System"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--service-window"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--service-window=300"})}),(0,n.jsx)(s.td,{children:"Set the reliability service window (see above)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--mode"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--mode=prod"})}),(0,n.jsxs)(s.td,{children:["Set ",(0,n.jsx)(s.code,{children:"dev"})," or ",(0,n.jsx)(s.code,{children:"prod"})," mode"]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Auth"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--auth-plugin"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--auth-plugin=pwd"})}),(0,n.jsx)(s.td,{children:"Sets the authentication plugin (see above)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--auth-root-password"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--auth-root-password=mypass"})}),(0,n.jsx)(s.td,{children:"Sets the root account password (see above)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Endpoints"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--endpoint"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--endpoint=tcp@localhost:2003"})}),(0,n.jsxs)(s.td,{children:["Repeat this for all your endpoints such as ",(0,n.jsx)(s.code,{children:"tls@host:port"})," and ",(0,n.jsx)(s.code,{children:"tcp@host:port"})]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--tlscert"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--tlscert=cert.pem"})}),(0,n.jsx)(s.td,{children:"Path to TLS cert"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--tlskey"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--tlskey=private.key"})}),(0,n.jsx)(s.td,{children:"Path to TLS private key"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--tls-passphrase"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"--tls-passphrase=pass.txt"})}),(0,n.jsx)(s.td,{children:"Path to plaintext file containing TLS private key password"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"environment-variables",children:"Environment variables"}),"\n",(0,n.jsx)(s.p,{children:"You can use the following environment variables:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Category"}),(0,n.jsx)(s.th,{children:"Variable"}),(0,n.jsx)(s.th,{children:"Example"}),(0,n.jsx)(s.th,{children:"Meaning"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"System"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_SERVICE_WINDOW"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_SERVICE_WINDOW=300"})}),(0,n.jsx)(s.td,{children:"Sets the reliability service window (see above)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Auth"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_AUTH_PLUGIN"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_AUTH_PLUGIN=pwd"})}),(0,n.jsx)(s.td,{children:"Sets the authentication plugin"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_AUTH_ROOT_PASSWORD"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_AUTH_ROOT_PASSWORD=mypass"})}),(0,n.jsx)(s.td,{children:"Sets the root account password"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Endpoints"})}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_ENDPOINTS"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_ENDPOINTS=tcp@myhost:2003,tls@myhost:2004"})}),(0,n.jsx)(s.td,{children:"Sets the endpoints to use"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_TLS_CERT"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_TLS_CERT=cert.pem"})}),(0,n.jsx)(s.td,{children:"Sets the path to the TLS cert"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_TLS_KEY"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_TLS_KEY=private.key"})}),(0,n.jsx)(s.td,{children:"Sets the path to the TLS private key"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_TLS_KEY_PASS"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SKYDB_TLS_KEY_PASS=pass.txt"})}),(0,n.jsx)(s.td,{children:"Sets the path to the plaintext file containing the TLS private key password"})]})]})]})]})}function a(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},1151:(e,s,t)=>{t.d(s,{Z:()=>c,a:()=>d});var n=t(7294);const i={},r=n.createContext(i);function d(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);